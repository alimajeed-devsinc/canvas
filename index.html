<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas</title>
</head>

<body>
    <img id="img" src="user.png" style="display: none;">
   <div class="col-12" style="height: 50%;">
       <div><input type="text" name="header" id="header" value="header">
            <input type="button" id="header-button" value="Add header" onclick="addheader();"></div>
       <canvas id="canvas" style="border: 1px solid black; width: fit-content;height: 50vh;">

       </canvas>
       <div> <input type="text" name="footer" id="footer" value="footer" >
        <input type="button" id="footer-button" value="Add Footer" onclick="addfooter();"></div>

        <div> <input type="text" name="caption" id="caption" value="caption" >
            <input type="button" id="caption-button" value="Add Caption" onclick="addcaption();"></div>
    

    </div>
       <div > <input type="file" name="File" id="file" ></div>
   </div>
   <div><input type="button" name="download" id="downloadbutton" onclick="download();" value="Download"></div>
   <script >
       let height,width;
       console.log("JS working");
       let fileInput = document.getElementById('file');
       fileInput.addEventListener('change', function(ev) {
        if(ev.target.files) {
            let file = ev.target.files[0];
            var reader  = new FileReader();
            reader.readAsDataURL(file);
            reader.onloadend = function (e) {
                var image = new Image();
                image.src = e.target.result;
                image.onload = function(ev) {
                    var canvas = document.getElementById('canvas');
                    // canvas.width = image.width;
                    // canvas.height = image.height;
                    // width= canvas.width;
                    // height= canvas.height;
                    var ctx = canvas.getContext('2d');
                    ctx.drawImage(image,0,20,canvas.width,110);
                    console.log(canvas.width,canvas.height);
                }
            }
        }
        
       
});

        function addheader(){
            var headerText = document.getElementById("header").value;
            var c = document.getElementById("canvas");
            var ctx = c.getContext("2d");
            ctx.font = "15px Georgia";
            ctx.textAlign="center";
            ctx.backgroundColor="red";
            ctx.fillText(headerText, 150,15 );
        }

        function addfooter(){
            var footerText = document.getElementById("footer").value;
            var c = document.getElementById("canvas");
            var ctx = c.getContext("2d");
            ctx.font = "15px Georgia";
            ctx.textAlign="center";

            ctx.fillText(footerText, 150, 145);
        }
        function addcaption(){
            var captionText = document.getElementById("caption").value;
            var c = document.getElementById("canvas");
            var ctx = c.getContext("2d");
            ctx.font = "15px Georgia";
            ctx.textAlign="center";

            ctx.fillText(captionText, 150, 70);
        }
        function download(){
                var canvas = document.getElementById("canvas");
            var image = canvas.toDataURL();
            var aDownloadLink = document.createElement('a');
            aDownloadLink.download = 'canvas_image.png';
            aDownloadLink.href = image;
            aDownloadLink.click();
            }

   </script>
</body>
</html>

